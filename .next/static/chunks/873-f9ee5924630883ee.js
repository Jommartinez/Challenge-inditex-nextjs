(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{5680:function(e,t,a){"use strict";a.d(t,{CharacterCard:function(){return l}});var r=a(7437),i=a(7138),c=a(6648),n=a(684);a(532);var s=a(4098);let l=e=>{var t;let{character:a}=e,{toggleFavorite:l}=(0,s.s4)();return(0,r.jsxs)("article",{className:"character-card",children:[(0,r.jsx)(i.default,{href:"/character/".concat(null==a?void 0:a.id),className:"character-card__photo",children:(0,r.jsx)(c.default,{priority:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",fill:!0,src:null!==(t=null==a?void 0:a.imageUrl)&&void 0!==t?t:"",alt:null==a?void 0:a.name})}),(0,r.jsxs)("div",{className:"character-card__info",children:[(0,r.jsx)("div",{className:"character-card__line"}),(0,r.jsx)("p",{className:"character-card__title",children:null==a?void 0:a.name}),(0,r.jsx)("button",{className:"character-card__button",onClick:()=>{l(a)},children:(0,r.jsx)(n.h,{isSelected:null==a?void 0:a.isFavorite})})]})]})}},3353:function(e,t,a){"use strict";a.d(t,{CharacterInfo:function(){return l}});var r=a(7437),i=a(6648),c=a(2873);a(2317);var n=a(4098),s=a(2265);let l=e=>{var t,a;let{character:l}=e,[o,d]=(0,s.useState)(!1),{toggleFavorite:h}=(0,n.s4)(),{favoriteList:u}=(0,n.QO)();return(0,s.useEffect)(()=>{d(u.some(e=>e.id===(null==l?void 0:l.id)))},[l]),(0,r.jsx)("section",{className:"character-info",children:(0,r.jsxs)("article",{className:"character-info__wrapper",children:[(0,r.jsx)("div",{className:"character-info__image-wrapper",children:(0,r.jsx)(i.default,{priority:!0,className:"character-info__image",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",src:null!==(t=null==l?void 0:l.imageUrl)&&void 0!==t?t:"",alt:null!==(a=null==l?void 0:l.name)&&void 0!==a?a:""})}),(0,r.jsxs)("div",{className:"character-info__data",children:[(0,r.jsxs)("div",{className:"character-info__wrapper-title",children:[(0,r.jsx)("h1",{className:"character-info__title",children:null==l?void 0:l.name}),(0,r.jsx)("button",{onClick:()=>h(l),className:"character-info__button",children:(0,r.jsx)(c.h_,{isSelected:o})})]}),(0,r.jsx)("p",{className:"character-info__description",children:null==l?void 0:l.description})]})]})})}},3530:function(e,t,a){"use strict";a.d(t,{CharactersList:function(){return l}});var r=a(7437),i=a(4098),c=a(5680);a(555);var n=a(2265),s=a(9488);let l=()=>{let[e,t]=(0,n.useState)([]),{charactersList:a,favoriteList:l,favoriteLayout:o,favoriteFilterList:d}=(0,i.QO)();return(0,n.useEffect)(()=>{o?t(d):t(a.map(e=>({...e,isFavorite:l.some(t=>t.id===e.id)})))},[a,l,o,d]),(0,r.jsx)(r.Fragment,{children:0!==e.length||o?(0,r.jsx)("section",{className:"characters-list",children:e.map(e=>(0,r.jsx)(c.CharacterCard,{character:e},e.id))}):(0,r.jsx)(s.g,{text:"Loading characters..."})})}},5969:function(e,t,a){"use strict";a.d(t,{ComicsList:function(){return s}});var r=a(7437),i=a(2265),c=a(2873);a(1830);var n=a(4098);let s=e=>{let{characterId:t}=e,[a,s]=(0,i.useState)([]),{fetchComics:l}=(0,n.vU)();return(0,i.useEffect)(()=>{(async()=>{s(await l(parseInt(t)))})()},[t]),(0,r.jsxs)("section",{className:"comics-list",children:[(0,r.jsx)("h2",{className:"comics-list__title",children:"Comics"}),(0,r.jsx)("div",{className:"comics-list__carousel",children:a&&(null==a?void 0:a.length)>0?null==a?void 0:a.map(e=>(0,r.jsx)(c.kT,{id:e.id,title:e.title,imageUrl:e.imageUrl,year:e.year},e.id)):(0,r.jsx)(c.gb,{text:"Loading comics..."})})]})}},3845:function(e,t,a){"use strict";a.d(t,{Header:function(){return l}});var r=a(7437),i=a(7138),c=a(2873);a(4389);var n=a(4098),s=a(6463);let l=()=>{let e=(0,s.useRouter)(),{setFavoriteLayout:t,favoriteList:a,favoritesWithFilter:l,charactersWithFilter:o,setFilterName:d}=(0,n.QO)(),h=a=>{t(a),d(""),a?l(""):o(""),e.push("/")};return(0,r.jsxs)("header",{className:"header",children:[(0,r.jsx)(i.default,{href:"/",className:"header__logo",onClick:()=>h(!1),children:(0,r.jsx)(c.TR,{})}),(0,r.jsxs)("div",{className:"header__favs",onClick:()=>h(!0),children:[(0,r.jsx)(c.h_,{isSelected:!0}),(0,r.jsx)("span",{className:"header__favs-value",children:null==a?void 0:a.length})]})]})}},684:function(e,t,a){"use strict";a.d(t,{h:function(){return i}});var r=a(7437);a(8917);let i=e=>{let{isSelected:t}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("svg",{"data-testid":"selected-heart-icon",width:"24",height:"22",viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"heart-icon selected",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3.63869L6 -0.00292969L0 3.63869V11.4422L12 21.6734L24 11.4422V3.63869L18 -0.00292969L12 3.63869Z"})}):(0,r.jsx)("svg",{"data-testid":"unselected-heart-icon",width:"26",height:"25",viewBox:"0 0 26 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"heart-icon unselected",children:(0,r.jsx)("path",{d:"M7 1.67337L7.51885 0.818504L7 0.503596L6.48115 0.818505L7 1.67337ZM13 5.31499L12.4812 6.16985L13 6.48476L13.5188 6.16985L13 5.31499ZM1 5.31499L0.481151 4.46012L0 4.75215V5.31499H1ZM1 13.1185H0V13.58L0.351203 13.8794L1 13.1185ZM13 23.3497L12.3512 24.1106L13 24.6638L13.6488 24.1106L13 23.3497ZM25 13.1185L25.6488 13.8794L26 13.58V13.1185H25ZM25 5.31499H26V4.75215L25.5188 4.46012L25 5.31499ZM19 1.67337L19.5189 0.818505L19 0.503596L18.4812 0.818504L19 1.67337ZM6.48115 2.52824L12.4812 6.16985L13.5188 4.46012L7.51885 0.818504L6.48115 2.52824ZM1.51885 6.16985L7.51885 2.52824L6.48115 0.818505L0.481151 4.46012L1.51885 6.16985ZM2 13.1185V5.31499H0V13.1185H2ZM13.6488 22.5887L1.6488 12.3575L0.351203 13.8794L12.3512 24.1106L13.6488 22.5887ZM13.6488 24.1106L25.6488 13.8794L24.3512 12.3575L12.3512 22.5887L13.6488 24.1106ZM26 13.1185V5.31499H24V13.1185H26ZM25.5188 4.46012L19.5189 0.818505L18.4812 2.52824L24.4812 6.16985L25.5188 4.46012ZM18.4812 0.818504L12.4812 4.46012L13.5188 6.16985L19.5189 2.52824L18.4812 0.818504Z"})})})}},9488:function(e,t,a){"use strict";a.d(t,{g:function(){return i}});var r=a(7437);a(9812);let i=e=>{let{text:t}=e;return(0,r.jsxs)("div",{className:"loading",children:[(0,r.jsx)("div",{className:"loading__spinner"}),(0,r.jsx)("p",{className:"loading__text",children:t})]})}},6843:function(e,t,a){"use strict";a.d(t,{Search:function(){return s}});var r=a(7437),i=a(6648),c={src:"/_next/static/media/search-icon.337363dc.svg",height:13,width:13,blurWidth:0,blurHeight:0};a(2607);var n=a(4098);let s=()=>{let{charactersList:e,favoriteLayout:t,favoriteList:a,filterName:s,setFilterName:l,favoritesWithFilter:o,charactersWithFilter:d}=(0,n.QO)();return(0,r.jsxs)("section",{className:"search",children:[(0,r.jsxs)("form",{className:"search__container",children:[(0,r.jsx)("label",{htmlFor:"search",children:(0,r.jsx)(i.default,{src:c,alt:"search",width:12,height:12,priority:!1})}),(0,r.jsx)("input",{"data-testid":"search-input",type:"text",id:"search",name:"search",className:"search__input",placeholder:"Search a character...",onChange:e=>{e.preventDefault();let a=e.target.value;l(a),t?o(a):d(a)},value:s})]}),(0,r.jsxs)("div",{className:"search__result","data-testid":"search-result",children:[t?a.length:e.length," RESULTS"]})]})}},2873:function(e,t,a){"use strict";a.d(t,{ak:function(){return d.CharacterInfo},F_:function(){return o.CharactersList},kT:function(){return u},vF:function(){return h.ComicsList},h_:function(){return s.h},gb:function(){return v.g},TR:function(){return n},ol:function(){return l.Search}}),a(3845);var r=a(7437),i=a(6648),c=a(6780);let n=()=>(0,r.jsx)(i.default,{className:"logo",src:c.default,alt:"Logo Marvel",width:130,height:52,priority:!0});var s=a(684),l=a(6843),o=a(3530);a(5680);var d=a(3353),h=a(5969);a(50);let u=e=>{let{title:t,imageUrl:a,year:c}=e;return(0,r.jsxs)("article",{className:"comic-card",children:[(0,r.jsx)(i.default,{src:a,alt:t,width:169,height:269}),(0,r.jsxs)("div",{className:"comic-card__info",children:[(0,r.jsx)("h3",{className:"comic-card__title",children:t}),(0,r.jsx)("p",{className:"comic-card__year",children:c})]})]})};var v=a(9488)},375:function(e,t,a){"use strict";a.d(t,{b:function(){return r}});let r=(0,a(2265).createContext)({charactersList:[],favoriteLayout:!1,favoriteList:[],favoriteFilterList:[],filterName:"",setCharactersList:()=>{},setFavoriteLayout:()=>{},setFavoriteList:()=>{},setFavoriteFilterList:()=>{},favoritesWithFilter:()=>{},charactersWithFilter:()=>{},setFilterName:()=>{}})},4098:function(e,t,a){"use strict";a.d(t,{QO:function(){return u},s4:function(){return d},Ig:function(){return l},vU:function(){return o}});let r=e=>"https://gateway.marvel.com/v1/public/".concat(e,"?ts=1&apikey=f7e97c0718d1ae5ed46c523cd3314df5&hash=290f7e964b07ee431f314d276c8d429b"),i=(e,t)=>{let a=r("characters");return fetch("".concat(a).concat(e?"&nameStartsWith=".concat(e):"","&limit=").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.results})},c=e=>fetch(r("characters/".concat(e)),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.results}),n=e=>{let t=r("characters/".concat(e,"/comics"));return fetch("".concat(t).concat("&limit=20&orderBy=onsaleDate"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.results})};var s=a(2265);let l=()=>({fetchCharacters:(0,s.useCallback)(async e=>{try{return(await i(e,50)).map(e=>({id:e.id,name:e.name,description:e.description,imageUrl:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),isFavorite:!1}))}catch(e){return console.error("error fetching characters",e),[]}},[]),fetchCharacterById:(0,s.useCallback)(async e=>{try{let r=await c(e);if(r&&r.length>0){var t,a;return{id:null===(t=r[0])||void 0===t?void 0:t.id,name:null===(a=r[0])||void 0===a?void 0:a.name,description:r[0].description,imageUrl:"".concat(r[0].thumbnail.path,".").concat(r[0].thumbnail.extension),isFavorite:!1}}}catch(e){return console.error("error fetching character by id",e),null}},[])}),o=()=>({fetchComics:(0,s.useCallback)(async e=>{try{return(await n(e)).map(e=>({id:e.id,title:e.title,year:new Date(e.dates[0].date).getFullYear().toString(),imageUrl:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)}))}catch(e){return console.error("error fetching comics",e),[]}},[])}),d=()=>{let{charactersList:e,favoriteList:t,setFavoriteList:a,setCharactersList:r,setFavoriteFilterList:i}=u();return{toggleFavorite:c=>{let n=[];t.some(e=>e.id===c.id)?(c.isFavorite=!1,a(n=t.filter(e=>e.id!==c.id))):(c.isFavorite=!0,a(n=[...t,{...c,isFavorite:!0}])),i(n),r(e.map(e=>e.id===c.id?c:e))}}};var h=a(375);let u=()=>(0,s.useContext)(h.b)},532:function(){},2317:function(){},555:function(){},50:function(){},1830:function(){},4389:function(){},8917:function(){},9812:function(){},2607:function(){},6780:function(e,t,a){"use strict";a.r(t),t.default={src:"/_next/static/media/marvel-logo.f7cfb073.svg",height:52,width:130,blurWidth:0,blurHeight:0}}}]);